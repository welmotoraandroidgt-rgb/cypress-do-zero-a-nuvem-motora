# Lidando com links que abrem em outra aba

Na aplica√ß√£o CAC TAT, temos um link para a pol√≠tica de privacidade, o qual quando clicado, abre tal p√°gina em uma nova aba do navegador.

Como testar tal p√°gina?

Ou ent√£o, quais alternativas tenho √† minha disposi√ß√£o?

Vou te apresentar duas alternativas.

## Alternativa 1 - confie que o navegador funciona (teste a aplica√ß√£o, n√£o o browser)

Se um elemento √¢ncora (`<a>`) possuir o atributo `target` com o valor `_blank`, ao ser clicado, o valor do atributo `href` ser√° aberto em uma nova aba. Este √© o comportamento padr√£o em qualquer navegador.

Neste caso, podemos simplesmente verificar tal caracter√≠stica, sem sequer precisar clicar no elemento.

Por exemplo:

`cy.get('.some-link').should('have.attr', 'target', '_blank')`

## Alternativa 2 - remova o atributo `target` do elemento

Se voc√™ precisar ir para outra p√°gina, o Cypress permite remover a propriedade `target` do elemento √¢ncora.

Para isso, te apresento o comando [`.invoke()`](https://docs.cypress.io/api/commands/invoke).

Com o comando `invoke()`, voc√™ pode fazer: `cy.get('#link-that-opens-in-another-tab').invoke('removeAttr', 'target')`.

> üë®‚Äçüè´ Vale ressaltar que, para que essa alternativa funcione, a p√°gina que costuma abrir em outra aba deve estar no mesmo dom√≠nio (ou subdom√≠nio) da aplica√ß√£o em teste. Caso contr√°rio, recomendo dar uma olhada no comando [`cy.origin`](https://docs.cypress.io/api/commands/origin).

## Conte√∫do sugerido

Em 2023, criei um conte√∫do chamado [Aprenda como navegar por diferentes abas com o plugin @cypress/puppeteer [beta]](https://youtu.be/ODLNP85NQOY?si=PMMZeNYoKcANrCM4).

Recomendo dar uma olhada, como outra alternativa para navega√ß√£o por diferentes abas do navegador.

## Exerc√≠cio

1. Crie um teste chamado `verifica que a pol√≠tica de privacidade abre em outra aba sem a necessidade de um clique`
2. Tal teste deve utilizar a alternativa 1 demonstrada acima
3. Por fim, execute o novo teste no _Test Runner_ e quando o mesmo estiver passando, siga adiante para o pr√≥ximo exerc√≠cio

## Exerc√≠cio extra 1

1. Crie um testes chamado `acessa a p√°gina da pol√≠tica de privacidade removendo o target e ent√£o clicando no link`
2. Tal teste deve utilizar a alternativa 2 demonstrada acima
3. Por fim, execute o novo teste no _Test Runner_ e quando o mesmo estiver passando, siga adiante para o pr√≥ximo exerc√≠cio

## Exerc√≠cio extra 2 - Desafio

1. Crie um testes chamado `testa a p√°gina da pol√≠tica de privacidade de forma independente`
2. Use sua criativade e as funcionalidades que aprendeu at√© aqui para realizar este teste (a solu√ß√£o √© mais simples do que voc√™ imagina)
3. Por fim, execute o novo teste no _Test Runner_ e siga adiante somente quando o teste estiver passando

## Mostre ao mundo o que voc√™ aprendeu

Para mostrar √† sua rede profissional o que voc√™ aprendeu at√© agora, poste o seguinte no LinkedIn.

> Estou fazendo o curso "Cypress, do Zero √† Nuvem" da escola online Talking About Testing, onde aprendi a lidar com links que abrem em outra aba do navegador. #TalkingAboutTesting #EscolaTAT #CypressDoZeroANuvem #Cypress

**Obs.:** Lembre-se de me marcar em sua postagem. [Aqui est√° meu perfil no LinkedIn](https://www.linkedin.com/in/walmyr-lima-e-silva-filho).

___

Parab√©ns! Vamos para a [li√ß√£o 8](./08.md) para aprender como executar os testes simulando as dimens√µes de um dispositivo m√≥vel.
